---
layout: example-react
title: React
permalink: /examples/react
---

<style>
    theoplayer-default-ui,
    theoplayer-ui {
        font-family: 'Noto Sans', sans-serif;
        width: 100%;
    }

    .my-title,
    .my-time-display {
        color: white;
        padding: 10px;
        font-size: 14px;
        line-height: 24px;
    }
</style>

<div id="app"></div>

<script type="text/babel" data-type="module">
    import * as React from 'react';
    import { useCallback, useContext, useEffect, useState } from 'react';
    import { createRoot } from 'react-dom/client';
    import * as THEOplayerUI from '@theoplayer/react-ui';

    const configuration = {
        libraryLocation: 'https://cdn.theoplayer.com/dash/theoplayer/',
        license: '{{ site.theoplayer_license }}',
        allowNativeFullscreen: true
    };

    const source = {
        sources: { src: 'https://cdn.theoplayer.com/video/elephants-dream/playlist.m3u8' },
        textTracks: [
            {
                default: true,
                src: 'https://cdn.theoplayer.com/video/elephants-dream/thumbnails.vtt',
                label: 'thumbnails',
                kind: 'metadata'
            }
        ]
    };

    // A custom React hook using THEOplayer.
    // This hook returns the player's current time, automatically updating whenever it changes.
    const useCurrentTime = () => {
        // Retrieve the THEOplayer instance.
        // This will become available as soon as this component is mounted
        // inside a THEOplayer <DefauLtUI> <UIContainer>.
        const player = useContext(THEOplayerUI.PlayerContext);
        // Keep track of the player's current time.
        const [time, setTime] = useState(0);
        const onTimeChange = useCallback(() => {
            if (!player) return;
            setTime(player.currentTime);
        }, [player]);
        useEffect(() => {
            player?.addEventListener(['timeupdate', 'seeking'], onTimeChange);
            return () => player?.removeEventListener(['timeupdate', 'seeking'], onTimeChange);
        }, [player]);
        return time;
    };

    // A custom React component using THEOplayer.
    const MyTimeDisplay = () => {
        const time = useCurrentTime();
        return <span className="my-time-display">{time}</span>;
    };

    const Spacer = () => {
        const styles = { flexGrow: 1 };
        return <span style={styles}></span>;
    };

    // A custom player UI.
    const MyCustomUI = ({ configuration, source, title }) => {
        return (
            <THEOplayerUI.UIContainer
                configuration={configuration}
                source={source}
                onReady={(player) => {
                    console.log('THEOplayer is ready!', player);
                }}
                topChrome={
                    <THEOplayerUI.ControlBar>
                        <span className="my-title">{title}</span>
                    </THEOplayerUI.ControlBar>
                }
                centeredChrome={<THEOplayerUI.PlayButton />}
                centeredLoading={<THEOplayerUI.LoadingIndicator />}
                bottomChrome={
                    <>
                        <THEOplayerUI.ControlBar>
                            <THEOplayerUI.TimeRange />
                        </THEOplayerUI.ControlBar>
                        <THEOplayerUI.ControlBar>
                            <THEOplayerUI.MuteButton />
                            <THEOplayerUI.VolumeRange />
                            <MyTimeDisplay />
                            <Spacer />
                            <THEOplayerUI.LanguageMenuButton menu="language-menu" />
                            <THEOplayerUI.SettingsMenuButton menu="settings-menu" />
                            <THEOplayerUI.FullscreenButton />
                        </THEOplayerUI.ControlBar>
                    </>
                }
                menu={
                    <>
                        <THEOplayerUI.LanguageMenu id="language-menu" />
                        <THEOplayerUI.SettingsMenu id="settings-menu" />
                    </>
                }
                error={<THEOplayerUI.ErrorDisplay />}
            />
        );
    };

    const root = createRoot(document.getElementById('app'));
    root.render(
        <>
            <h2>Default UI</h2>
            <THEOplayerUI.DefaultUI configuration={configuration} source={source} />
            <h2>Custom UI</h2>
            <MyCustomUI configuration={configuration} source={source} title="Elephant's Dream" />
        </>
    );
</script>
